<h1>Update</h1>
<div class="container">
  <div class="header">
    <h1>üìã Task Manager</h1>
    <p>Manage your tasks efficiently with Angular</p>
  </div>

  <div class="content">
    <!-- Task Form -->
    <div class="task-form">
      <h3>Add New Task</h3>
      <form (ngSubmit)="addTask()">
        <div class="form-group">
          <label for="title">Task Title</label>
          <input
            type="text"
            id="title"
            class="form-control"
            [(ngModel)]="newTask.title"
            name="title"
            required
          />
        </div>

        <div class="form-group">
          <label for="description">Description</label>
          <textarea
            id="description"
            class="form-control"
            [(ngModel)]="newTask.description"
            name="description"
            rows="3"
          ></textarea>
        </div>

        <div class="form-group">
          <label for="priority">Priority</label>
          <select
            id="priority"
            class="form-control"
            [(ngModel)]="newTask.priority"
            name="priority"
          >
            <option value="low">Low</option>
            <option value="medium" selected>Medium</option>
            <option value="high">High</option>
          </select>
        </div>

        <div class="form-group">
          <label for="dueDate">Due Date</label>
          <input
            type="date"
            id="dueDate"
            class="form-control"
            [(ngModel)]="newTask.dueDate"
            name="dueDate"
          />
        </div>

        <button type="submit" class="btn btn-primary">Add Task</button>
      </form>
    </div>

    <!-- Filters -->
    <div class="filter-section">
      <div class="filter-group">
        <span class="filter-label">Filters:</span>

        <div class="checkbox-group">
          <input
            type="checkbox"
            id="showCompleted"
            [(ngModel)]="showCompleted"
            name="showCompleted"
            (change)="applyFilters()"
          />
          <label for="showCompleted">Show Completed</label>
        </div>

        <div class="form-group" style="margin: 0">
          <select
            [(ngModel)]="priorityFilter"
            name="priorityFilter"
            class="form-control"
            style="width: auto"
            (change)="applyFilters()"
          >
            <option value="">All Priorities</option>
            <option value="high">High Priority</option>
            <option value="medium">Medium Priority</option>
            <option value="low">Low Priority</option>
          </select>
        </div>

        <div class="form-group" style="margin: 0">
          <input
            type="text"
            class="form-control"
            [(ngModel)]="searchTerm"
            name="searchTerm"
            placeholder="Search tasks..."
            style="width: 200px"
            (input)="searchTasks()"
          />
        </div>
      </div>
    </div>

    <!-- Tasks List -->
    <div class="tasks-section">
      <div class="tasks-header">
        <h2>Tasks</h2>
        <div class="task-stats">
          Total: {{ filteredTasks.length }} | Completed:
          {{ getCompletedCount() }}
        </div>
      </div>

      <div *ngIf="filteredTasks.length === 0" class="no-tasks">
        <div class="no-tasks-icon">üìù</div>
        <h3>No tasks found</h3>
        <p>Add a new task or adjust your filters</p>
      </div>

      <div
        *ngFor="let task of filteredTasks"
        class="task-item"
        [ngClass]="{ completed: task.completed }"
      >
        <div class="task-header">
          <div>
            <h4
              class="task-title"
              [ngClass]="{ 'completed-text': task.completed }"
            >
              {{ task.title }}
            </h4>
            <span class="task-priority priority-{{ task.priority }}">
              {{ task.priority }}
            </span>
          </div>

          <div class="task-actions">
            <button
              class="btn btn-sm"
              [ngClass]="task.completed ? 'btn-warning' : 'btn-success'"
              (click)="toggleComplete(task)"
            >
              {{ task.completed ? "Undo" : "Complete" }}
            </button>
            <button class="btn btn-danger btn-sm" (click)="deleteTask(task.id)">
              Delete
            </button>
          </div>
        </div>

        <p class="task-description">{{ task.description }}</p>

        <div class="task-meta">
          <span class="task-date"
            >Due: {{ task.dueDate | date : "mediumDate" }}</span
          >
          <span class="task-created"
            >Created: {{ task.createdAt | date : "short" }}</span
          >
        </div>
      </div>
    </div>
  </div>
</div>

<router-outlet></router-outlet>
